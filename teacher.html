<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HSC VLMS - Teacher Dashboard</title>
    <style>
        :root { --nav-blue: #003366; }
        body { font-family: sans-serif; margin: 0; display: flex; background: #f4f4f4; }
        .sidebar { width: 220px; height: 100vh; background: var(--nav-blue); color: white; position: fixed; padding: 20px; box-sizing: border-box; }
        .main { margin-left: 220px; padding: 40px; width: 100%; }
        .status { background: #ffc107; padding: 10px; text-align: center; font-size: 12px; font-weight: bold; margin-bottom: 20px; border-radius: 5px; }
        .course-card { background: white; padding: 20px; margin-bottom: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); cursor: pointer; }
        .btn-sync { background: #27ae60; color: white; border: none; padding: 10px; width: 100%; cursor: pointer; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="sidebar">
        <h2>HSC VLMS</h2>
        <p>Teacher Mode</p>
        <hr>
        <button class="btn-sync" onclick="handleAuthClick()">Sync Classroom</button>
        <br><br>
        <button onclick="window.location.href='admin.html'" style="width:100%; cursor:pointer;">Student Roster</button>
        <p onclick="window.location.href='index.html'" style="margin-top:20px; cursor:pointer; font-size:12px;">Logout</p>
    </div>

    <div class="main">
        <div id="conn-status" class="status">Google API: Initializing...</div>
        <h1>My Classes</h1>
        <div id="courses-list">Connect Google to see assignments.</div>
    </div>

    <script src="https://apis.google.com/js/api.js"></script>
    <script src="https://accounts.google.com/gsi/client"></script>

    <script>
        const CLIENT_ID = '1042342028327-pliq405qso25f01br911ksqhn8f3jkgk.apps.googleusercontent.com';
        const API_KEY = 'YOUR_GOOGLE_API_KEY'; // PASTE YOUR KEY HERE
        const SCOPES = 'https://www.googleapis.com/auth/classroom.courses.readonly https://www.googleapis.com/auth/classroom.coursework.me';

        let tokenClient;

        function gapiLoaded() {
            gapi.load('client', async () => {
                await gapi.client.init({ apiKey: API_KEY, discoveryDocs: ["https://classroom.googleapis.com/$discovery/rest?version=v1"] });
                document.getElementById('conn-status').innerText = "Google API: Ready";
            });
        }

        function gisLoaded() {
            tokenClient = google.accounts.oauth2.initTokenClient({
                client_id: CLIENT_ID,
                scope: SCOPES,
                callback: (resp) => { if (resp.access_token) loadCourses(); }
            });
        }

        function handleAuthClick() { tokenClient.requestAccessToken(); }

        async function loadCourses() {
            const resp = await gapi.client.classroom.courses.list();
            const courses = resp.result.courses || [];
            const list = document.getElementById('courses-list');
            list.innerHTML = '';
            courses.forEach(c => {
                list.innerHTML += `<div class="course-card"><strong>${c.name}</strong><br><small>${c.id}</small></div>`;
            });
        }

        // Initialize libraries
        window.onload = () => { gapiLoaded(); gisLoaded(); };
    </script>
</body>
</html>
